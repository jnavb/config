LANG=utf32123
set -g default-terminal "screen-256color"
set-option -g default-command "exec $SHELL"

# Set prefix to ctrl + space.
unbind C-b
set-option -g prefix C-Space
bind-key C-Space send-prefix

# split panes using prefix + i, k
bind i split-window -h -c "#{pane_current_path}"
bind k split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# switch panes using prefix + j, l
bind j select-pane -L
bind l select-pane -U

# cycle panes using option + shift + j
bind -n "˜" select-pane -t :.+
# cycle windows using option + shift + k
bind -n "¯" previous-window
bind -n "˘" next-window

# switch windows using prefix + u, o
bind u previous-window
bind o next-window
unbind n
unbind p

# new windows default to ~/work
bind c new-window -c "$HOME/work"

# kill window with prefix + x
bind + kill-window
unbind &

# Mouse can be used to select panes, select windows (by clicking on the status
# bar) Props to Wincent
set -g mouse on
set -g focus-events on

# Status bar
set -g status-right "%H:%M %d-%b"
set -g status-bg colour33

# Pane border
set -g pane-active-border-style fg=colour255
set -g pane-border-style fg=colour236
set-hook -g pane-focus-in 'select-pane -P "bg=#22222e,fg=default"'
set-hook -g pane-focus-out 'select-pane -P "bg=default,fg=default"'
set-hook -g after-select-window 'run-shell "rm -f $HOME/.config/jorgeAgents/#{session_name}-#{window_index}-*"'


# NOTE: you can use vars with $<var> and ${<var>} as long as the str is double quoted: ""
# WARNING: hex colors can't contain capital letters

# --> Catppuccin
thm_bg="#1e1e28"
thm_fg="#d7dae0"
thm_cyan="#c2e7f0"
thm_black="#15121c"
thm_gray="#2d293b"
thm_magenta="#c6aae8"
thm_pink="#f0afe1"
thm_red="#e28c8c"
thm_green="#b3e1a3"
thm_yellow="#eadda0"
thm_blue="#a4b9ef"
thm_orange="#f7c196"
catppuccin12="#3e4058"

# ----------------------------=== Theme ===--------------------------

# status
set -g status-position bottom
set -g status "on"
set -g status-bg "${thm_bg}"
set -g status-interval 5
set -g status-justify "centre"
set -g status-left-length "100"
set -g status-right-length "100"

# messages
set -g message-style fg="${thm_cyan}",bg="${thm_gray}",align="centre"
set -g message-command-style fg="${thm_cyan}",bg="${thm_gray}",align="centre"

# panes
set -g pane-border-style fg="${thm_gray}"
set -g pane-active-border-style fg="${thm_orange}"
set -g pane-border-lines heavy
set -g window-style bg="${thm_bg}"
set -g window-active-style bg="#22222e"
set -g pane-border-status top
set -g pane-border-format "#[align=right,fg=${thm_cyan}] #{s|$HOME|~|:pane_current_path} "

# windows
setw -g monitor-activity off
set -g visual-activity off
setw -g window-status-activity-style fg="${thm_bg}",bg="${thm_red}"
setw -g window-status-separator ""
setw -g window-status-style fg="${thm_fg}",bg="${thm_bg}",none

# --------=== Statusline

set -g status-left ""
#set -g status-right "#[fg=$thm_pink,bg=$thm_bg,nobold,nounderscore,noitalics]#[fg=$thm_bg,bg=$thm_pink,nobold,nounderscore,noitalics] #[fg=$thm_fg,bg=$thm_gray] #W #{?client_prefix,#[fg=$thm_red],#[fg=$thm_green]}#[bg=$thm_gray]#{?client_prefix,#[bg=$thm_red],#[bg=$thm_green]}#[fg=$thm_bg] #[fg=$thm_fg,bg=$thm_gray] #S "
set -g status-right ""

# current_dir
setw -g window-status-format "#{?#{!=:#(ls $HOME/.config/jorgeAgents/#{session_name}-#{window_index}-* 2>/dev/null && echo Y),},#[bg=#5a5a38]    ,#[bg=#2d293b]    }"
setw -g window-status-current-format "#[bg=$thm_cyan]    "

# git branch after window indicators (custom status-format)
set -g status-format[0] "#[align=left range=left #{E:status-left-style}]#[push-default]#{T;=/#{status-left-length}:status-left}#[pop-default]#[norange default]#[list=on align=#{status-justify}]#[list=left-marker]<#[list=right-marker]>#[list=on]#{W:#[range=window|#{window_index} #{E:window-status-style}#{?#{&&:#{window_last_flag},#{!=:#{E:window-status-last-style},default}}, #{E:window-status-last-style},}#{?#{&&:#{window_bell_flag},#{!=:#{E:window-status-bell-style},default}}, #{E:window-status-bell-style},#{?#{&&:#{||:#{window_activity_flag},#{window_silence_flag}},#{!=:#{E:window-status-activity-style},default}}, #{E:window-status-activity-style},}}]#[push-default]#{T:window-status-format}#[pop-default]#[norange default]#{?window_end_flag,,#{window-status-separator}},#[range=window|#{window_index} list=focus #{?#{!=:#{E:window-status-current-style},default},#{E:window-status-current-style},#{E:window-status-style}}#{?#{&&:#{window_last_flag},#{!=:#{E:window-status-last-style},default}}, #{E:window-status-last-style},}#{?#{&&:#{window_bell_flag},#{!=:#{E:window-status-bell-style},default}}, #{E:window-status-bell-style},#{?#{&&:#{||:#{window_activity_flag},#{window_silence_flag}},#{!=:#{E:window-status-activity-style},default}}, #{E:window-status-activity-style},}}]#[push-default]#{T:window-status-current-format}#[pop-default]#[norange list=on default]#{?window_end_flag,,#{window-status-separator}}}#[nolist default]  #[fg=${thm_green}]#(cd #{pane_current_path} && git branch --show-current 2>/dev/null) #[fg=${thm_cyan}]#(cd #{pane_current_path} && basename $(git rev-parse --show-toplevel 2>/dev/null) 2>/dev/null)#[align=right range=right #{E:status-right-style}]#[push-default]#{T;=/#{status-right-length}:status-right}#[pop-default]#[norange default]"

# --------=== Modes
setw -g clock-mode-colour "${thm_blue}"
setw -g mode-style "fg=${thm_pink} bg=${catppuccin12} bold"
